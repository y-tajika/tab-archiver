# Changelog

---

## [2.6.0] - 2026-01-16

**背景:** 保存時に保存先フォルダを選択できる機能を追加

### Added
- 保存前に保存先フォルダを選択できる機能を追加
  - ポップアップUIに保存先選択ボタンを追加
  - クリックでブックマークフォルダツリーから選択可能
  - 選択したフォルダを保存時に使用

### Improved
- ポップアップを一層便利に、フォルダ選択処理を強化

---

## [2.5.0] - 2026-01-15

**背景:** タブ要約機能をオプション化、デフォルトでシンプルな日付のみのフォルダ名に

### Added
- 設定ページに「タブ要約をフォルダ名に含める」チェックボックスを追加
  - デフォルトで無効（日付のみのフォルダ名）
  - 有効にすると従来通り「日付_要約キーワード」形式に

### Changed
- デフォルトのフォルダ名形式を日付のみに変更
  - 旧: `01-15_GitHub_開発`
  - 新: `01-15` （設定で要約を有効化可能）

### Improved
- 要約生成アルゴリズムが原始的すぎる問題を解決：オプション化で自由に選択可能に

---

## [2.4.0] - 2026-01-15

**背景:** 保存前にタブを確認・編集できる機能を追加

### Added
- タブ一覧表示機能
  - ポップアップで保存前に全タブのリストを確認可能
  - ウィンドウごとにグループ化して表示
  - ファビコンとタイトルを表示、ツールチップでURL確認
  - 折りたたみ可能（デフォルトで展開）
- タブ削除機能（×ボタン）
  - ホバー時に表示される削除ボタンで直接タブを閉じる
  - 削除後のカウント自動更新
- アーカイブ除外機能（-ボタン）
  - タブを閉じずに、今回の保存対象から除外
  - 除外されたタブはブラウザに残り、ブックマークされない

### Changed
- ポップアップ幅を360pxに調整
- タブ一覧の最大高さを400pxに設定、スクロール対応

### Improved
- 削除・除外ボタンのUI：ホバー時に表示、色分け（削除=赤、除外=オレンジ）
- 空ウィンドウグループの自動削除

---

## [2.3.0] - 2026-01-15

**背景:** 全ウィンドウ対応で複数ウィンドウのタブを整理された構造で保存

### Added
- 全ウィンドウ保存機能（デフォルト）
  - 全ウィンドウのタブをウィンドウごとにサブフォルダへ保存（Window1, Window2, ...）
  - ウィンドウが1つのみの場合はサブフォルダを作らず直接保存
- 設定ページに保存対象選択オプションを追加
  - 「現在のウィンドウのみ」または「全ウィンドウ（ウィンドウごとにサブフォルダ）」

### Changed
- デフォルト保存対象を「全ウィンドウ」に変更
- 全ウィンドウモードでは全ウィンドウのタブからフォルダ名要約を生成

### Improved
- 不要なウィンドウのサブフォルダを手動で削除しやすい構造
- Chrome/Edge標準の「今開いているタブをまとめてブックマークする」より優れた整理機能

---

## [2.2.0] - 2026-01-15

**背景:** フォルダ選択UIをChrome/Edge標準のブックマークダイアログ方式に変更

### Added
- フォルダ選択モーダルに「新しいフォルダ」作成ボタンを追加
- フォルダ名編集機能（F2キーまたはダブルクリック）を追加
- フォルダパス表示（"親フォルダ / 子フォルダ" 形式）

### Changed
- 保存先フォルダ選択UIをドロップダウンからテキスト入力+参照ボタン方式に変更
- フォルダ選択時にモーダルで階層ツリー表示する方式に変更（Chrome/Edge標準ブックマークダイアログと同様の仕様）

### Improved
- 深いフォルダ階層の視認性と操作性が向上
- フォルダ管理が単一インターフェース内で完結（作成・編集・選択）

---

## [2.1.0] - 2026-01-15

**背景:** コード品質向上とメンテナンス性改善

### Added
- `src/constants.js` を新規作成し、共通定数を統合
- カスタムフォルダ未選択時の警告機能

### Improved
- ストップワードを大幅に拡充（日本語助詞・助動詞、英語冠詞・前置詞など）
- 要約アルゴリズムのURL処理を `new URL()` を使用して改善
- コードの重複を削減（DEFAULT_SETTINGS の共通化）

### Changed
- ES6 Module 形式に移行（manifest.json に `"type": "module"` 追加）
- ストップワードをカテゴリ別に整理（可読性向上）

---

## [2.0.1] - 2026-01-15

**背景:** 重大なバグ修正とセキュリティ強化

### Fixed
- カスタムフォルダIDの存在検証を追加（削除済みフォルダ指定時のクラッシュを防止）
- ハードコードされたID "2" を削除し、ブックマークツリーから動的に親フォルダを検出
- ブックマーク保存失敗時にユーザーへの詳細なエラー通知を実装

### Changed
- コメントを "Tab Logger" から "TabArchiver" に統一

### Improved
- Edge、Braveなど他のChromiumブラウザでの互換性向上
- エラーハンドリングの強化とUX改善

---

## [2.0.0] - 2026-01-15

**背景:** プロジェクト名称の変更

### Changed
- プロジェクト名を「Tab Logger」から「TabArchiver」に変更
- ディレクトリ名を `tab-logger-extension` から `tab-archiver-extension` に変更
- すべてのドキュメントとファイル内の参照を更新

### Breaking Changes
- 拡張機能の名前が変更されたため、ユーザーには新しい拡張機能として認識される可能性があります

---

## [1.8.1] - 2026-01-15

**背景:** ハードコーディング排除による保守性向上

### Changed
- ショートカットキーをmanifest.jsonから動的に取得するように変更
- options.htmlとpopup.htmlでショートカットキーを実行時に表示
- ドキュメント内の重複した参照注記を整理

### Improved
- manifest.jsonが唯一の真実の情報源（Single Source of Truth）に
- ユーザーがショートカットキーを変更した場合も正しく表示される

---

## [1.8.0] - 2026-01-15

**背景:** ユーザーから保存先フォルダをカスタマイズしたいという要望

### Added
- ブックマーク保存先フォルダ選択UI
- ショートカットキー設定ページへのリンク

### Changed
- 設定ページのUI拡充

---

## [1.7.2] - 2026-01-15

**背景:** 大量タブ保存時のパフォーマンス問題（50タブで10秒以上）

### Changed
- ブックマーク保存を並列処理化（Promise.allSettled）
- popup.js の未使用変数削除とDOM要素キャッシュ化
- options.js に入力値検証追加

### Improved
- パフォーマンス大幅向上（約10倍高速化）
- エラー表示の重複防止
- コード可読性向上

---

## [1.7.1] - 2026-01-15

**背景:** コードレビューによる品質改善

### Changed
- async/await パターンにリファクタリング
- popup.js を IIFE パターンに変更
- エラーハンドリング強化

### Improved
- コード可読性・保守性向上

---

## [1.7.0] - 2026-01-15

**背景:** ユーザビリティ向上とUX改善

### Added
- アイコン追加（16x16, 48x48, 128x128）
- popup.js にUI内エラー表示機能

### Changed
- 拡張機能名を "Tab Logger" に簡潔化
- alert() をUI内エラー表示に変更

---

## [1.6.2] - 2026-01-15

**背景:** コード整理とドキュメント簡潔化

### Removed
- 不要なURLフィルタリング機能削除
- 冗長なコンソールログ削除

### Changed
- ドキュメント簡潔化
- コードクリーンアップ

---

## [1.6.1] - 2026-01-15

**背景:** バグ修正と要約アルゴリズム実装

### Fixed
- truncate() 省略記号修正
- options.js UTF-8エンコーディング修正

### Changed
- generateSummary() アルゴリズム実装

---

## [1.6.0] - 2026-01-15

**背景:** 自動生成されたフォルダ名を編集したいという要望

### Added
- ポップアップUIからフォルダ名手動編集
- 2つの保存方法（手動編集 / ショートカット自動保存）

---

## [1.5.0] - 2026-01-14

**背景:** フォルダ名から内容を推測できるようにしたい

### Changed
- 要約アルゴリズム改善設計

---

## [1.4.1] - 2026-01-14

**背景:** Ctrl+Shift+BがChrome予約済みで競合

### Changed
- ショートカットキー変更（Alt+Shift+S）

### Fixed
- Chrome予約済みキー競合回避

---

## [1.4.0] - 2026-01-14

### Changed
- "その他のブックマーク" 動的検索実装
- フォールバック機能追加

---

## [1.3.0] - 2026-01-14

### Added
- 設定画面（Options Page）追加
- フォルダ名最大文字数設定

---

## [1.2.0] - 2026-01-14

### Added
- タブタイトルから要約生成
- フォーマット: `YYYYMMDD_要約`

---

## [1.1.0] - 2026-01-14

### Added
- キーボードショートカット（Ctrl+Shift+B）

---

## [1.0.0] - Initial Release

### Added
- 全タブ一括ブックマーク
- フォルダ名: `YYYYMMDD_HHMMSS`

### Changed
- 要約アルゴリズム改善設計:
  - 3文字以上の単語を優先抽出
  - 長い単語に高スコア（6文字以上は特に重視）
  - 漢字3文字以上を重視
  - カタカナ技術用語を優先

**注**: 設計のみで実装はv1.6.1で完了

---

## [1.4.1] - 2026-01-14

### Changed
- ショートカットキー変更: Ctrl+Shift+B  Alt+Shift+S
- 拡張機能タイトル更新: "Tab Logger (Alt+Shift+S)"

### Fixed
- Ctrl+Shift+BがChrome予約済みのため競合を回避

---

## [1.4.0] - 2026-01-14

### Changed
- "その他のブックマーク" の動的検索を実装
- IDハードコーディングからツリー検索方式へ変更

### Added
- フォールバック機能追加（ID "2" を使用）

### Technical
- `chrome.bookmarks.getTree()` で全ツリーを取得
- タイトルマッチで "その他のブックマーク" を検索
- 見つからない場合はID "2" にフォールバック

---

## [1.3.0] - 2026-01-14

### Added
- 設定画面（Options Page）追加
- フォルダ名の最大文字数を設定可能（デフォルト: 50文字）
- 新規ファイル: `options.html` / `options.css` / `options.js`

---

## [1.2.0] - 2026-01-14

### Added
- タブタイトルから要約を生成してフォルダ名に使用
- フォーマット: `YYYYMMDD_要約`

### Technical
- 日本語（漢字カタカナ）とアルファベットを抽出
- 出現頻度と文字数でスコアリング
- 上位3単語を使用
- ストップワード: "google", "youtube", "twitter", "facebook" など除外

---

## [1.1.0] - 2026-01-14

### Added
- キーボードショートカット: Ctrl+Shift+B
- `manifest.json` に `commands` セクション追加

---

## [1.0.0] - Initial Release

### Added
- 全タブを一括ブックマーク
- フォルダ名: `YYYYMMDD_HHMMSS`
- "その他のブックマーク" 配下に保存

### Technical
- Manifest V3
- Service Worker
- Chrome Bookmarks API


